(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,_,t){"use strict";t.d(_,"a",function(){return a});var s=t(0),r=t.n(s),n=t(8),a=function(e){return JSON.parse(r.a.get(e,'files["chains.json"].content',JSON.stringify(n.a.chains,null,2)))}},102:function(e,_,t){"use strict";t.d(_,"a",function(){return a});var s=t(0),r=t.n(s),n=t(8),a=function(e){return JSON.parse(r.a.get(e,'files["songs.json"].content',JSON.stringify(n.a.songs,null,2)))}},103:function(e,_,t){"use strict";t.d(_,"a",function(){return a});var s=t(104),r=Object(s.detect)(),n={chrome:/\(eval at <anonymous> \(eval at evalCode \(.+:\d+\)\), <anonymous>:(\d+):(\d+)\)/,firefox:/line \d+ > eval line \d+ > eval:(\d+):(\d+)/,edge:/\(eval code:(\d+):(\d+)\)/};function a(e){var _=n[r.name];if(_&&e.stack){var t=_.exec(e.stack);if(t)return{line:t[1],column:t[2]}}else if("safari"===r.name)return{line:e.line,column:e.column}}},105:function(e,_,t){"use strict";var s=t(5),r=t(21),n=t(3),a=t(0),o=t.n(a),i=t(15),l={octaves:4,volumes:8,phrases:64,chains:64,songs:8,matrixLength:16,chainChannels:4,startOffset:"+0.1",startOffsetDouble:"+0.5",bpm:1152,subdivision:"2m"},u={volume:function(e){return(e+1)/l.volumes},note:function(e){return e}},c=[1,2,3,5,8,12,20,32],d=[].concat(c).reverse(),h=function(e){return c[e]},p=function(e){return d.map(function(e){return{"16n":e}})[e]},E=function(e){var _,t=e.volumeNode,s=e.index;return 0===s&&((_=new n.Synth({oscillator:{type:"pulse",width:.5},envelope:{release:.07}})).script8Name="synth"),1===s&&((_=new n.Synth({oscillator:{type:"pulse",width:.75},envelope:{release:.07}})).script8Name="synth"),2===s&&((_=new n.Synth({oscillator:{type:"triangle"},envelope:{release:.07}})).script8Name="synth"),3===s&&((_=new n.NoiseSynth({envelope:{release:.07}})).script8Name="noise"),t?_.chain(t,n.Master):_.chain(n.Master),_},m=function(e){var _=e.note,t=e.octave,s=e.volume,r=e.time,a=void 0===r?n.context.currentTime:r,o=e.synth;if(a>=n.context.currentTime){var l=Object(i.a)(_+12*t,!0,!0),c=u.volume(s);"synth"===o.script8Name&&o.triggerAttack(l,a,c),"noise"===o.script8Name&&o.triggerAttack(a,c)}},b=function(e){var _=e.note,t=e.octave,s=e.volume,r=e.time,a=void 0===r?n.context.currentTime:r,o=e.synth,l=e.tempo;if(a>=n.context.currentTime){var c=Object(i.a)(_+12*t,!0,!0),d=p(l),h=u.volume(s);"synth"===o.script8Name&&o.triggerAttackRelease(c,d,a,h),"noise"===o.script8Name&&o.triggerAttackRelease(d,a,h)}},f=function(e){var _=e.time,t=void 0===_?n.context.currentTime:_,s=e.delay,r=void 0===s?0:s,a=e.synth;t>=n.context.currentTime&&a.triggerRelease(t+r)};_.a=function(e){var _=o.a.range(l.chainChannels).map(function(_){return E({volumeNode:e,index:_})}),t=o.a.range(l.chainChannels).map(function(_){return E({volumeNode:e,index:_})}),a=E({volumeNode:e,index:0});n.Transport.bpm.value=l.bpm,n.Transport.start(l.startOffset);var i={},u={},c={},d=[],O=function(){o.a.forEach(u,function(e,t){var s=e.sequence;s&&(s.stop(),_.forEach(function(e){return f({synth:e})}))})},D=function(){o.a.forEach(i,function(e,_){var s=e.sequence;s&&(s.stop(),t.forEach(function(e){return f({synth:e})}))})},P=function(e){var t=e.chain,a=e.phrases,i=o()(o.a.range(Math.pow(l.matrixLength,2))).map(function(e){var _=o.a.padStart(e.toString(l.matrixLength),2,0).split("").map(function(e){return parseInt(e,l.matrixLength)}),s=Object(r.a)(_,2),n=s[0],i=s[1],u=o.a.get(t,n);return o.a.range(l.chainChannels).map(function(e){var _,s=o.a.get(u,e);if(!o.a.isNil(s)){var r=o.a.get(a,s,{}),n=o.a.get(r.notes,i);o.a.isNil(n)||(_={noteElement:n,tempo:t.tempo})}return _})}).dropRightWhile(function(e){return o()(e).compact().isEmpty()}).value();return{callback:function(e,t){i[t].forEach(function(r,a){r&&!o.a.isNil(r.noteElement)?t===i.length-1?(r.noteElement.octave>-1&&b(Object(s.a)({},r.noteElement,{time:e,synth:_[a],tempo:r.tempo})),-1===r.noteElement.octave&&f({time:e,synth:_[a],delay:n.Time(p(r.tempo)).valueOf()})):(r.noteElement.octave>-1&&m(Object(s.a)({},r.noteElement,{time:e,synth:_[a]})),r.noteElement.octave):f({time:e,synth:_[a]})})},events:o.a.range(i.length),sequence:null,tempo:t.tempo}},M=function(e){var _=e.song,a=e.chains,i=e.phrases,u=o()(o.a.range(Math.pow(l.matrixLength,3))).map(function(e){var t=o.a.padStart(e.toString(l.matrixLength),3,0).split("").map(function(e){return parseInt(e,l.matrixLength)}),s=Object(r.a)(t,3),n=s[0],u=s[1],c=s[2],d=o.a.get(_,n),h=o.a.get(a,d),p=o.a.get(h,u);return o.a.range(l.chainChannels).map(function(e){var t,s=o.a.get(p,e);if(!o.a.isNil(s)){var r=o.a.get(i,s,{}),n=o.a.get(r.notes,c);o.a.isNil(n)||(t={noteElement:n,tempo:_.tempo})}return t})}).dropRightWhile(function(e){return o()(e).compact().isEmpty()}).value();return{callback:function(e,_){u[_].forEach(function(r,a){r&&!o.a.isNil(r.noteElement)?_===u.length-1?(r.noteElement.octave>-1&&b(Object(s.a)({},r.noteElement,{time:e,synth:t[a],tempo:r.tempo})),-1===r.noteElement.octave&&f({time:e,synth:t[a],delay:n.Time(p(r.tempo)).valueOf()})):(r.noteElement.octave>-1&&m(Object(s.a)({},r.noteElement,{time:e,synth:t[a]})),r.noteElement.octave):f({time:e,synth:t[a]})})},events:o.a.range(u.length),sequence:null,tempo:_.tempo}};return{playPhrase:function(e){var _=o.a.get(c,e);if(_){for(;d.length;)d.pop().dispose();var t=_.tempo,r=new n.Sequence(function(e,r){var o=_.notes[r];o?r===l.matrixLength-1?(o.octave>-1&&b(Object(s.a)({},o,{time:e,synth:a,tempo:t})),-1===o.octave&&f({time:e,synth:a,delay:n.Time(p(t)).valueOf()})):(o.octave>-1&&m(Object(s.a)({},o,{time:e,synth:a})),o.octave):f({time:e,synth:a})},o.a.range(l.matrixLength),l.subdivision);r.loop=!1,r.playbackRate=h(t),r.start(),d.push(r)}},playChain:function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];O(),o.a.forEach(u,function(t,s){+s===e&&(t.sequence=new n.Sequence(t.callback,t.events,l.subdivision),t.sequence.loop=_,t.sequence.playbackRate=h(t.tempo),t.sequence.start(l.startOffset))})},stopChain:O,playSong:function(e){var _=arguments.length>1&&void 0!==arguments[1]&&arguments[1];D(),o.a.forEach(i,function(t,s){+s===e&&(t.sequence=new n.Sequence(t.callback,t.events,l.subdivision),t.sequence.loop=_,t.sequence.playbackRate=h(t.tempo),t.sequence.start(l.startOffset))})},stopSong:D,makeSongsAndChains:function(e){var _=e.songs,t=e.chains,s=e.phrases;D(),O(),c=s,i=o.a.mapValues(_,function(e){return M({song:e,chains:t,phrases:s})}),u=o.a.mapValues(t,function(e){return P({chain:e,phrases:s})})}}}},109:function(e,_,t){e.exports=t(110)},11:function(e){e.exports={a:"0.1.280"}},110:function(e,_,t){"use strict";t.r(_);var s=t(2),r=t.n(s),n=t(78),a=t.n(n),o=t(79);a.a.render(r.a.createElement(o.a,null),document.getElementById("root"))},15:function(e,_,t){"use strict";t.d(_,"b",function(){return r});var s=["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"],r=function(e){return s.indexOf(e)};_.a=function(e,_,t){var r=function(e){return s[e%s.length]}(e),n=function(e){return Math.floor(e/s.length)}(e)+(t?2:0);return _?"".concat(r).concat(n):r}},225:function(e,_,t){},30:function(e,_,t){"use strict";_.a="init = state => {\n}\n\nupdate = (state, input, elapsed) => {\n}\n\ndrawActors = (state, fade) =>\n  state.actors && state.actors.forEach(actor =>\n    sprite(\n      actor.x,\n      actor.y,\n      actor.sprite,\n      fade ? actor.trailBrighten || -3 : actor.brighten,\n      actor.flipH,\n      actor.flipV\n    )\n  )\n\ndraw = state => {\n  camera()\n  clear()\n}"},32:function(e,_,t){"use strict";t.d(_,"a",function(){return r});var s={},r=["mousedown","ArrowUp","ArrowRight","ArrowDown","ArrowLeft","a","b","Enter"," "];_.b=function(e){for(var _=(window.navigator.getGamepads&&window.navigator.getGamepads()[0]||{}).buttons,t={__mousedown:e.has("mousedown"),up:e.has("ArrowUp")||_&&_[12].pressed,right:e.has("ArrowRight")||_&&_[15].pressed,down:e.has("ArrowDown")||_&&_[13].pressed,left:e.has("ArrowLeft")||_&&_[14].pressed,a:e.has("a")||_&&(_[1].pressed||_[2].pressed),b:e.has("b")||_&&(_[0].pressed||_[3].pressed),start:e.has("Enter")||_&&_[9].pressed,select:e.has(" ")||_&&_[8].pressed},r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];if(!a.startsWith("__")){var o=!s[a]&&t[a];t[a+"Pressed"]=o;var i=s[a]&&!t[a];t[a+"Released"]=i}}return s=t,t}},50:function(e,_,t){"use strict";for(var s=t(0),r=t(21),n=t(14),a=t.n(n),o=[[246,214,189],[195,163,138],[153,117,119],[129,98,113],[78,73,95],[32,57,79],[15,42,63],[8,20,30]],i=o.map(function(e){var _=Object(r.a)(e,3),t=_[0],s=_[1],n=_[2];return"rgb(".concat(t,",").concat(s,",").concat(n,")")}),l=[],u=0;u<8;u++){var c=o[u],d=255<<24|c[2]<<16|c[1]<<8|c[0];l[u]=d>>>0}for(var h={},p=0;p<8;p++)h[l[p]]=p;var E={rgb:function(e){return i[e%i.length]},triplet:function(e){return o[e%o.length]},int:function(e){var _=e%l.length;return g&&(_>2?_=a()(+_-2,0,7):_+=2),l[_]},lookupInt:function(e){return e in h?h[e]:7}},m=function(e){var _=e.x1,t=e.y1,s=e.x2,r=e.y2,n=e.setPixel,a=e.color,o=!1;if(Math.abs(_-s)<Math.abs(t-r)){var i=[t,_];_=i[0],t=i[1];var l=[r,s];s=l[0],r=l[1],o=!0}if(_>s){var u=[s,_];_=u[0],s=u[1];var c=[r,t];t=c[0],r=c[1]}for(var d=s-_,h=r-t,p=2*Math.abs(h),E=0,m=t,b=_;b<=s;b++)o?n(m,b,a):n(b,m,a),(E+=p)>d&&(r>t?m++:m--,E-=2*d)},b=t(6),f=function(e){var _=e.points,t=e.args,s=e.line;if(_.length){var r,n,a,o,i,l;switch(t.length){case 1:n=_.map(function(e){return Object(b.a)(e)}),r=t[0];break;case 2:a=Math.cos(t[0]/180*Math.PI),o=Math.sin(t[0]/180*Math.PI);var u=_.map(function(e){return e[0]}),c=_.map(function(e){return e[1]});i=(Math.min.apply(Math,u)+Math.max.apply(Math,u))/2,l=(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2,n=_.map(function(e){return[(e[0]-i)*a-(e[1]-l)*o+i,(e[0]-i)*o+(e[1]-l)*a+l]}),r=t[1];break;case 3:throw Error("`polyStroke` found 3 arguments instead of 2, 3, or 5.");default:a=Math.cos(t[0]/180*Math.PI),o=Math.sin(t[0]/180*Math.PI),i=t[1],l=t[2],r=t[3],n=_.map(function(e){return[(e[0]-i)*a-(e[1]-l)*o+i,(e[0]-i)*o+(e[1]-l)*a+l]})}for(var d=1;d<_.length;d++)s(Math.round(n[d-1][0]),Math.round(n[d-1][1]),Math.round(n[d][0]),Math.round(n[d][1]),r);s(Math.round(n[n.length-1][0]),Math.round(n[n.length-1][1]),Math.round(n[0][0]),Math.round(n[0][1]),r)}},O=function(e){var _=e.cx,t=e.cy,s=e.radius,r=e.color,n=e.onlyStroke,a=e.setPixel,o=e.line,i=s-1,l=0,u=1,c=1,d=u-(s<<1),h=function(e,s){n?(a(_+e,t+s,r),a(_+e,t-s,r)):o(_+e,t+s,_+e,t-s,r)};if(2===s)h(-1,0),h(0,1),h(1,0);else if(3===s)h(-2,0),h(-2,1),h(-1,2),h(-0,2),h(1,2),h(2,1),h(2,0);else for(;i>=l;)h(i,l),h(-i,l),h(l,i),h(-l,i),d<=0&&(l++,d+=c,c+=2),d>0&&(i--,d+=(u+=2)-(s<<1))},D=function(e){var _=e.x,t=e.y,s=e.spriteIndex,r=e.darken,n=e.flipH,o=e.flipV,i=e.setPixel,l=e.sprites;l[s]&&l[s].slice(0,8).forEach(function(e,s){e.split("").forEach(function(e,l){if(" "!==e){var u=a()(+e-r,0,7);i(Math.floor(_)+(n?7-l:l),Math.floor(t)+(o?7-s:s),u)}})})},P={"<":[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,0,0],">":[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0],"/":[0,0,0,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0],":":[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"|":[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"(":[0,1,1,0,1,0,1,0,0,1,0,0],")":[1,0,0,1,0,1,0,1,1,0,0,0],0:[0,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],1:[1,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],2:[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1,0,0,0],3:[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1,0,0,0],4:[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0],5:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],6:[1,0,0,1,0,0,1,1,1,1,0,1,1,1,1,0,0,0],7:[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0],8:[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,0,0],9:[1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,0,0,0]," ":[0,0,0,0,0,0,0,0,0,0,0,0],".":[0,0,0,0,1,0],",":[0,0,0,0,1,1],"+":[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0,0,0,0],"-":[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0],"!":[1,1,1,0,1,0],"?":[1,1,0,1,1,1,0,0,1,0,0,0],a:[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],b:[1,1,0,1,0,1,1,1,0,1,0,1,1,1,1,0,0,0],c:[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],d:[1,1,0,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],e:[1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0,0],f:[1,1,1,1,0,0,1,1,1,1,0,0,1,0,0,0,0,0],g:[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1,0,0,0],h:[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0],i:[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1,0,0,0],j:[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0],k:[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],l:[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,0,0],m:[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,0,0,0],n:[1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0],o:[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],p:[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0,0,0,0],q:[1,1,1,1,0,1,1,0,1,1,0,1,0,1,1,0,0,0],r:[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1,0,0,0],s:[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0],t:[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],u:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0,0,0],v:[1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,0,0,0],w:[1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0],x:[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1,0,0,0],y:[1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,0,0],z:[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,0]},M=function(e){var _=e.x,t=e.y,s=e.letters,r=e.c,n=e.setPixel,a=Math.floor(_),o=Math.floor(t),i=!0,l=!1,u=void 0;try{for(var c,d=s.toString().split("")[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var h=c.value,p=P[h.toLowerCase()];if(p){for(var E=p.length/6,m=0;m<E;m++)for(var b=0;b<6;b++)p[b*E+m]&&n(a+m,o+b,r);a+=E+1}else a+=3}}catch(f){l=!0,u=f}finally{try{i||null==d.return||d.return()}finally{if(l)throw u}}};t.d(_,"c",function(){return g}),t.d(_,"b",function(){return T});var g=!1,T=function(e){g=!0;var _=e();return g=!1,_};_.a=function(e){var _=e.pixels,t=e.width,r=e.height,n=e.sprites,a=e.map,o=void 0===a?[]:a,i=JSON.parse(JSON.stringify(o)),l=0,u=0,c={},d=function(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e=Math.floor(e-l),s=Math.floor(s-u),!(e<0||e>=t||s<0||s>=r)){var a=E.int(n);if(a){var o=c[a]||a;_[s*t+e]=o}}},h=function(e,_,t,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;m({x1:e,y1:_,x2:t,y2:s,setPixel:d,color:r})},p=function(e,_,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];e-l<-8||e-l>t||_-u<-8||_-u>r||D({x:e,y:_,spriteIndex:s,darken:a,flipH:o,flipV:i,setPixel:d,sprites:n})};return{camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l=Math.floor(e),u=Math.floor(_)},clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;_.fill(E.int(e))},colorSwap:function(e,_){void 0===e&&void 0===_?c={}:c[E.int(e)]=E.int(_)},setPixel:d,getPixel:function(e,s){return e=Math.floor(e-l),s=Math.floor(s-u),e<0||e>=t||s<0||s>=r?7:E.lookupInt(_[s*r+e])},line:h,polyStroke:function(e){for(var _=arguments.length,t=new Array(_>1?_-1:0),s=1;s<_;s++)t[s-1]=arguments[s];f({points:e,args:t,line:h})},rectStroke:function(e,_,t,s){!function(e){var _=e.x,t=e.y,s=e.w,r=e.h,n=e.c,a=e.line,o=Math.floor(_),i=Math.floor(_+s-1),l=Math.floor(t),u=Math.floor(t+r-1);a(o,l,i,l,n),a(o,u,i,u,n),a(o,l,o,u,n),a(i,l,i,u,n)}({x:e,y:_,w:t,h:s,c:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,line:h})},rectFill:function(e,_,t,s){!function(e){for(var _=e.x,t=e.y,s=e.w,r=e.h,n=e.c,a=e.line,o=Math.floor(_),i=Math.floor(_+s-1),l=Math.floor(t),u=Math.floor(t+r-1),c=o;c<=i;c++)a(c,l,c,u,n)}({x:e,y:_,w:t,h:s,c:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,line:h})},circStroke:function(e,_,t){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;O({cx:Math.floor(e),cy:Math.floor(_),radius:Math.floor(t),color:s,onlyStroke:!0,setPixel:d,line:h})},circFill:function(e,_,t){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;O({cx:Math.floor(e),cy:Math.floor(_),radius:Math.floor(t),color:s,setPixel:d,line:h})},print:function(e,_,t){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;M({x:e,y:_,letters:t,c:s,setPixel:d})},sprite:p,getTile:function(e,_){var t=Object(s.get)(i,[_,e],null),r=null!==t?n[t]:null;return r&&(r.type=r[8]||0,r.number=t),r},setTile:function(e,_,t){i[_][e]=t},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i.forEach(function(t,s){t.forEach(function(t,r){null!==t&&p(8*(r+e),8*(s+_),t)})})},resetMap:function(){i=JSON.parse(JSON.stringify(o))}}}},51:function(e,_,t){"use strict";var s=t(29),r=t(6),n=t(5),a=t(0),o=t.n(a),i=function(e){return e.length||e.push(0),e.reduce(function(e,_,t){if(t>0){var s=e[t-1];return[].concat(Object(r.a)(e),[[s[1],s[1]+_]])}return[[0,_]]},[])};t.d(_,"b",function(){return u}),t.d(_,"a",function(){return l});var l=function(e){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o()(e).orderBy(function(e,_){return _}).map(function(e){return function(e,_){if(e.callUnderMouse&&e.text&&_){var t=e.callUnderMouse,s=e.text.slice(0,t.start),r=e.text.slice(t.start,t.end),n=e.text.slice(t.end);return"".concat(s,"_script8.injectHighlight(() => ").concat(r,")").concat(n)}return e.text}(e,_)}).filter(function(e){return!o.a.isEmpty(e)}).value().join("\n")},u=function(e){var _=JSON.parse(o.a.get(e,'files["misc.json"].content',"{}")),t=o.a.get(e,'files["code.js"].content',"");if(_.lines){var a=i(_.lines),l=t.split("\n");return a.reduce(function(e,_,t){return Object(n.a)({},e,Object(s.a)({},t,{text:l.slice.apply(l,Object(r.a)(_)).join("\n"),active:0===t,key:t}))},{})}return{0:{text:t,active:!0,key:0}}}},79:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(108),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(80),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(81),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(107),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(82),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(106),_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__),classnames__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10),classnames__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_10__),deep_equal__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4),deep_equal__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(deep_equal__WEBPACK_IMPORTED_MODULE_11__),tone__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3),tone__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(tone__WEBPACK_IMPORTED_MODULE_12__),d3_timer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(226),redux__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(12),lodash__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(0),lodash__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_15__),lodash_sum__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(85),lodash_sum__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash_sum__WEBPACK_IMPORTED_MODULE_16__),lodash_range__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(31),lodash_range__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_17__),lodash_flatten__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(49),lodash_flatten__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_18__),lodash_random__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(86),lodash_random__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(lodash_random__WEBPACK_IMPORTED_MODULE_19__),lodash_clamp__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(14),lodash_clamp__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_20__),lodash_once__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(87),lodash_once__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(lodash_once__WEBPACK_IMPORTED_MODULE_21__),lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(88),lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(89),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23__),lodash_chunk__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(90),lodash_chunk__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(lodash_chunk__WEBPACK_IMPORTED_MODULE_24__),_utils_bios_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(91),javascript_state_machine__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(92),javascript_state_machine__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(javascript_state_machine__WEBPACK_IMPORTED_MODULE_26__),_soundAPI_index_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(105),_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(50),_frameBufferCanvasAPI_pixelData_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(93),_contextCanvasAPI_trimCanvas_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(94),_validateToken_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(95),_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(32),_createReducer_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(96),_skeleton_js__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(30),_gistParsers_map_js__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(97),_gistParsers_sprites_js__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(98),_gistParsers_phrases_js__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(99),_gistParsers_chains_js__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(101),_gistParsers_songs_js__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(102),_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(51),_utils_errorLocation_js__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(103),_css_Iframe_css__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(225),_css_Iframe_css__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(_css_Iframe_css__WEBPACK_IMPORTED_MODULE_42__),_package_json__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(11),_package_json__WEBPACK_IMPORTED_MODULE_43___namespace=__webpack_require__.t(11,1),platform=window.navigator.platform;console.log(JSON.stringify("SCRIPT-8 iframe v ".concat(_package_json__WEBPACK_IMPORTED_MODULE_43__.a),null,2));var getUniqueErrorMessages=function(e){return lodash__WEBPACK_IMPORTED_MODULE_15___default()(e).map(function(e,_){return{type:_,data:e}}).filter(function(e){return e.data&&e.type}).sortBy("type").uniqBy(function(e){return JSON.stringify(e.data)}).value()};window.init=null,window.update=null,window.drawActors=null,window.draw=null,window._script8={embedState:{},reservedTokens:new Set(["init","update","drawActors","draw"]),injectHighlight:_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_28__.b};var NOOP=function(){},FPS=60,REDUX_HISTORY_SECONDS=2,CANVAS_SIZE=128,ACTOR_FRAME_SKIP=5,Iframe=function(_Component){function Iframe(e){var _;return Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,Iframe),(_=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__.a)(this,Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.a)(Iframe).call(this,e))).ArrowUpElement=null,_.setArrowUpRef=function(e){_.ArrowUpElement=e},_.ArrowRightElement=null,_.setArrowRightRef=function(e){_.ArrowRightElement=e},_.ArrowDownElement=null,_.setArrowDownRef=function(e){_.ArrowDownElement=e},_.ArrowLeftElement=null,_.setArrowLeftRef=function(e){_.ArrowLeftElement=e},_.aElement=null,_.setaRef=function(e){_.aElement=e},_.bElement=null,_.setbRef=function(e){_.bElement=e},_.EnterElement=null,_.setEnterRef=function(e){_.EnterElement=e},_.SpaceElement=null,_.setSpaceRef=function(e){_.SpaceElement=e},_.touchstartArrowUp=_.touchstartArrowUp.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstartArrowRight=_.touchstartArrowRight.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstartArrowDown=_.touchstartArrowDown.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstartArrowLeft=_.touchstartArrowLeft.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstarta=_.touchstarta.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstartb=_.touchstartb.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstartEnter=_.touchstartEnter.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchstartSpace=_.touchstartSpace.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendArrowUp=_.touchendArrowUp.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendArrowRight=_.touchendArrowRight.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendArrowDown=_.touchendArrowDown.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendArrowLeft=_.touchendArrowLeft.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchenda=_.touchenda.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendb=_.touchendb.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendEnter=_.touchendEnter.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.touchendSpace=_.touchendSpace.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.addLog=_.addLog.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.sendLogsToParent=_.sendLogsToParent.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.logs=[],_.sendErrorToParent=_.sendErrorToParent.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.loggerErrors={},_.printErrorsToCassetteScreen=_.printErrorsToCassetteScreen.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.updateGlobals=_.updateGlobals.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.evalCode=_.evalCode.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.startTimer=_.startTimer.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.handleTimelineInput=_.handleTimelineInput.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.handleActorClick=_.handleActorClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.handlePauseClick=_.handlePauseClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.handleRestartClick=_.handleRestartClick.bind(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__.a)(_))),_.heightSent=0,_.shadows=new Set(["document"]),_.blacklist=new Set(["eval","alert","_script8"]),_.keys=new Set,_.timer=null,_.previousElapsed=0,_.pastFpsValues=[],_.volumeNode=new tone__WEBPACK_IMPORTED_MODULE_12__.Volume,_.reducer=Object(_createReducer_js__WEBPACK_IMPORTED_MODULE_33__.a)(_.sendErrorToParent),_.store=null,_.previousInitString=null,_.reduxHistory=[],_.reduxLogger=function(e){return function(t){return function(s){return _.reduxHistory=[].concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(_.reduxHistory),[{state:e.getState(),action:s}]).slice(-FPS*REDUX_HISTORY_SECONDS),t(s)}}},_.soundFunctions=null,_.songSequences=null,_.state={started:!1,fps:null,game:"",sprites:{},map:{},songs:{},chains:{},phrases:{},timelineIndex:0,actors:[],selectedActors:[],message:null,callbacks:{},isPaused:!1,alteredStates:[],run:!0,sound:!0,isTouchScreen:!1},_._pixelData=Object(_frameBufferCanvasAPI_pixelData_js__WEBPACK_IMPORTED_MODULE_29__.a)({width:CANVAS_SIZE,height:CANVAS_SIZE}),_}return Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_7__.a)(Iframe,_Component),Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(Iframe,[{key:"touchstartArrowUp",value:function(){this.ArrowUpElement.classList.add("on"),this.keys.add("ArrowUp")}},{key:"touchstartArrowRight",value:function(){this.ArrowRightElement.classList.add("on"),this.keys.add("ArrowRight")}},{key:"touchstartArrowDown",value:function(){this.ArrowDownElement.classList.add("on"),this.keys.add("ArrowDown")}},{key:"touchstartArrowLeft",value:function(){this.ArrowLeftElement.classList.add("on"),this.keys.add("ArrowLeft")}},{key:"touchstarta",value:function(){this.aElement.classList.add("on"),this.keys.add("a")}},{key:"touchstartb",value:function(){this.bElement.classList.add("on"),this.keys.add("b")}},{key:"touchstartEnter",value:function(){this.EnterElement.classList.add("on"),this.keys.add("Enter")}},{key:"touchstartSpace",value:function(){this.SpaceElement.classList.add("on"),this.keys.add(" ")}},{key:"touchendArrowUp",value:function(){this.ArrowUpElement.classList.remove("on"),this.keys.delete("ArrowUp")}},{key:"touchendArrowRight",value:function(){this.ArrowRightElement.classList.remove("on"),this.keys.delete("ArrowRight")}},{key:"touchendArrowDown",value:function(){this.ArrowDownElement.classList.remove("on"),this.keys.delete("ArrowDown")}},{key:"touchendArrowLeft",value:function(){this.ArrowLeftElement.classList.remove("on"),this.keys.delete("ArrowLeft")}},{key:"touchenda",value:function(){this.aElement.classList.remove("on"),this.keys.delete("a")}},{key:"touchendb",value:function(){this.bElement.classList.remove("on"),this.keys.delete("b")}},{key:"touchendEnter",value:function(){this.EnterElement.classList.remove("on"),this.keys.delete("Enter")}},{key:"touchendSpace",value:function(){this.SpaceElement.classList.remove("on"),this.keys.delete(" ")}},{key:"sendLogsToParent",value:function(){if(!this.isEmbed){var e=this.state,_=e.message;e.run||_.ports[0].postMessage({logs:this.logs})}this.logs=[]}},{key:"addLog",value:function(e){this.isEmbed||(this.state.run||lodash__WEBPACK_IMPORTED_MODULE_15___default.a.isNil(e)||this.logs.push(e))}},{key:"sendErrorToParent",value:function(e){var _=e.type,t=e.error,s=void 0===t?null:t,r=this.state,n=r.message,a=r.run;if(s){var o={message:s.message,position:Object(_utils_errorLocation_js__WEBPACK_IMPORTED_MODULE_41__.a)(s)};o.message.startsWith("enhancer(...) is not a function")&&(o.message="The init or update functions are invalid."),JSON.stringify(this.loggerErrors[_])!==JSON.stringify(o)&&(this.loggerErrors[_]=o,this.isEmbed||n.ports[0].postMessage({errors:getUniqueErrorMessages(this.loggerErrors)}))}else this.loggerErrors[_]&&(this.loggerErrors[_]=null,this.isEmbed||n.ports[0].postMessage({errors:getUniqueErrorMessages(this.loggerErrors)}));a&&this.printErrorsToCassetteScreen()}},{key:"printErrorsToCassetteScreen",value:function(){var e=getUniqueErrorMessages(this.loggerErrors).map(function(e){return"error: ".concat(e.data.message)}).join(". ");e.length&&(lodash_chunk__WEBPACK_IMPORTED_MODULE_24___default()(e,32).forEach(function(e,_){var t=e.join("");lodash_range__WEBPACK_IMPORTED_MODULE_17___default()(3).forEach(function(e){lodash_range__WEBPACK_IMPORTED_MODULE_17___default()(3).forEach(function(s){window.print(1+e,1+s+8*_,t,7)})}),window.print(2,2+8*_,t,0)}),this.writePixelDataToCanvas())}},{key:"updateGlobals",value:function(e){var _;if(e)_=e;else{var t=_frameBufferCanvasAPI_index_js__WEBPACK_IMPORTED_MODULE_28__.a;_=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({console:console,StateMachine:javascript_state_machine__WEBPACK_IMPORTED_MODULE_26___default.a,JSON:JSON,Math:Math,Object:Object,Array:Array,log:this.addLog},t({pixels:this._pixelData.pixels,ctx:this._canvas.getContext("2d"),width:CANVAS_SIZE,height:CANVAS_SIZE,sprites:this.state.sprites,map:this.state.map}),{range:lodash_range__WEBPACK_IMPORTED_MODULE_17___default.a,flatten:lodash_flatten__WEBPACK_IMPORTED_MODULE_18___default.a,random:lodash_random__WEBPACK_IMPORTED_MODULE_19___default.a,clamp:lodash_clamp__WEBPACK_IMPORTED_MODULE_20___default.a})}Object.keys(_).forEach(function(e){window[e]=_[e],window._script8.reservedTokens.add(e)})}},{key:"writePixelDataToCanvas",value:function(){this._pixelData.writePixelDataToCanvas(this._canvas.getContext("2d"))}},{key:"drawUserGraphics",value:function(e){window.draw&&(window.draw(e),this.writePixelDataToCanvas())}},{key:"componentDidMount",value:function(){var e=this;this.soundFunctions=Object(_soundAPI_index_js__WEBPACK_IMPORTED_MODULE_27__.a)(this.volumeNode),this.updateGlobals({playPhrase:this.soundFunctions.playPhrase,playChain:this.soundFunctions.playChain,stopChain:this.soundFunctions.stopChain,playSong:this.soundFunctions.playSong,stopSong:this.soundFunctions.stopSong}),this.mousedownHandler=function(){e.keys.add("mousedown")},this.mouseupHandler=function(){e.keys.delete("mousedown")},this.keydownHandler=function(_){var t=_.altKey,s=_.metaKey,r=_.ctrlKey,n=_.key,a=_.code,o=e.state.message;(!e.isEmbed&&s&&"KeyS"===a&&lodash__WEBPACK_IMPORTED_MODULE_15___default.a.includes(platform,"Mac")||r&&"KeyS"===a&&!lodash__WEBPACK_IMPORTED_MODULE_15___default.a.includes(platform,"Mac"))&&(_.preventDefault(),o.ports[0].postMessage({shortcut:"save"})),!e.isEmbed&&t&&("Period"===a&&(_.preventDefault(),o.ports[0].postMessage({shortcut:"previous"})),"Slash"===a&&(_.preventDefault(),o.ports[0].postMessage({shortcut:"next"}))),_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__.a.includes(n)&&(_.preventDefault(),_.stopPropagation()),e.keys.add(n)},this.keyupHandler=function(_){var t=_.key;_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__.a.includes(t)&&(_.preventDefault(),_.stopPropagation()),e.keys.delete(t)},document.addEventListener("touchstart",function(){e.setState({isTouchScreen:!0}),e.mousedownHandler()}),document.addEventListener("mousedown",this.mousedownHandler),document.addEventListener("touchend",this.mouseupHandler),document.addEventListener("mouseup",this.mouseupHandler),document.addEventListener("keydown",this.keydownHandler),document.addEventListener("keyup",this.keyupHandler);var _=function(_){var t=_.data,s=t.type,r=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__.a)(t,["type"]),n=e.blacklist,a=e.shadows;if("callCode"===s)e.setState(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},r,{message:_}));else if("findInvalidToken"===s){var o=r.tokens.findIndex(function(e){return!Object(_validateToken_js__WEBPACK_IMPORTED_MODULE_31__.a)({token:e,blacklist:n,globals:window._script8.reservedTokens,shadows:a})});_.ports[0].postMessage(o)}else if("image"===s){var i=document.createElement("canvas");i.width=128,i.height=128,i.getContext("2d").drawImage(e._canvas,0,0,128,128),_.ports[0].postMessage(i.toDataURL())}};window.SCRIPT_8_EMBEDDED_GIST_ID?(this.isEmbed=!0,window.fetch("".concat("https://script-8-api-l55chnkhk.now.sh","/gist/").concat(window.SCRIPT_8_EMBEDDED_GIST_ID)).then(function(e){return e.json()}).then(function(t){e.gist=t,_({data:{type:"callCode",game:_utils_bios_js__WEBPACK_IMPORTED_MODULE_25__.a,isDoneFetching:!0,songs:Object(_gistParsers_songs_js__WEBPACK_IMPORTED_MODULE_39__.a)(t),chains:Object(_gistParsers_chains_js__WEBPACK_IMPORTED_MODULE_38__.a)(t),phrases:Object(_gistParsers_phrases_js__WEBPACK_IMPORTED_MODULE_37__.a)(t),sprites:Object(_gistParsers_sprites_js__WEBPACK_IMPORTED_MODULE_36__.a)(t),map:Object(_gistParsers_map_js__WEBPACK_IMPORTED_MODULE_35__.a)(t),run:!0,callbacks:{},sound:!0}})})):window.addEventListener("message",_),this.updateGlobals()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("touchstart",this.mousedownHandler),document.removeEventListener("mousedown",this.mousedownHandler),document.removeEventListener("touchend",this.mouseupHandler),document.removeEventListener("mouseup",this.mouseupHandler),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("keyup",this.keyupHandler)}},{key:"evalCode",value:function evalCode(){var _this3=this,shadows=this.shadows,state=this.state,game=state.game,message=state.message,callbacks=state.callbacks,isDoneFetching=state.isDoneFetching;try{isDoneFetching&&(window._script8.end=lodash_once__WEBPACK_IMPORTED_MODULE_21___default()(function(){_this3.setState({game:Object(_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_40__.a)(Object(_gistParsers_game_js__WEBPACK_IMPORTED_MODULE_40__.b)(_this3.gist)),started:!0}),"running"!==tone__WEBPACK_IMPORTED_MODULE_12__.context.state&&tone__WEBPACK_IMPORTED_MODULE_12__.start(),_this3.isEmbed||message.ports[0].postMessage({callback:callbacks.endCallback})})),this.previousInitString=window.init?window.init.toString():null;var shadowString="var ".concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(shadows).join(",")),innerSkeleton=_skeleton_js__WEBPACK_IMPORTED_MODULE_34__.a;eval("\n      // Shadow variables we don't want available.\n      ".concat(shadowString,"\n      // The inception eval allows the user to declare vars (e.g. screen).\n      eval(innerSkeleton)\n      eval(game)\n    ")),this.sendErrorToParent({type:"evalCode"})}catch(e){this.sendErrorToParent({type:"evalCode",error:e})}}},{key:"stopTimer",value:function(){this.timer&&this.timer.stop()}},{key:"startTimer",value:function(){var e=this;this.timer&&this.timer.stop(),this.previousElapsed=0,this.timer=Object(d3_timer__WEBPACK_IMPORTED_MODULE_13__.a)(function(_){try{var t,s=_-e.previousElapsed,r=Math.round(1e3/s);e.pastFpsValues.push(r),e.pastFpsValues.length>60&&(t=Math.round(lodash_sum__WEBPACK_IMPORTED_MODULE_16___default()(e.pastFpsValues)/e.pastFpsValues.length),e.pastFpsValues=[]),e.previousElapsed=_;var n=Object(_getUserInput_js__WEBPACK_IMPORTED_MODULE_32__.b)(e.keys);e.isEmbed?window.update(window._script8.embedState,n,s):e.store&&e.store.dispatch&&e.store.dispatch({type:"UPDATE",input:n,elapsed:s}),e.store&&e.store.dispatch&&e.drawUserGraphics(e.isEmbed?window._script8.embedState:e.store.getState()),e.sendLogsToParent(),void 0!==t&&t!==e.state.fps&&e.setState({fps:t}),e.sendErrorToParent({type:"startTimer"})}catch(a){e.sendErrorToParent({type:"startTimer",error:a})}},1e3/FPS)}},{key:"handleTimelineInput",value:function(e){this.setState({timelineIndex:+e.target.value})}},{key:"handleActorClick",value:function(e){var _=this.state.selectedActors,t=_.includes(e)?_.filter(function(_){return _!==e}):[].concat(Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(_),[e]);this.setState({selectedActors:t})}},{key:"handleRestartClick",value:function(){window.init=Date.now(),window._script8.embedState="SCRIPT-8-RESTART",this.reduxHistory=[],this.pastFpsValues=[],this.forceUpdate()}},{key:"handlePauseClick",value:function(){this.state.isPaused?(this.reduxHistory=[],this.startTimer()):this.stopTimer(),this.setState({selectedActors:[],actors:[],fps:null,isPaused:!this.state.isPaused})}},{key:"componentDidUpdate",value:function(e,_){var t=this,s=this.state,r=s.message,n=s.isPaused,a=s.game,o=s.sprites,i=s.map,l=s.timelineIndex,u=s.actors,c=s.selectedActors,d=s.sound,h=s.songs,p=s.chains,E=s.phrases,m=s.run;try{if(deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(o,_.sprites)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(i,_.map)||this.updateGlobals(),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(d,_.sound)||(tone__WEBPACK_IMPORTED_MODULE_12__.Master.mute=!d),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(h,_.songs)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(p,_.chains)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(E,_.phrases)||(this.soundFunctions.makeSongsAndChains({songs:h,chains:p,phrases:E}),this.handleRestartClick()),this.volumeNode.mute=!m,n)if(deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(n,_.isPaused)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(a,_.game)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(o,_.sprites)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(i,_.map)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(l,_.timelineIndex)&&deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(c,_.selectedActors)){var b=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this._ul.querySelectorAll("button")),f=Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this._ul.querySelectorAll("canvas"));b.length!==f.length&&(u.forEach(function(e,_){t._pixelData.pixels.fill(0),window.drawActors({actors:[Object(_Users_floritg_Documents_other_script_8_github_io_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__.a)({},e,{x:64,y:64})]}),t.writePixelDataToCanvas();var s=Object(_contextCanvasAPI_trimCanvas_js__WEBPACK_IMPORTED_MODULE_30__.a)({ctx:t._canvas.getContext("2d"),width:CANVAS_SIZE,height:CANVAS_SIZE});b[_].appendChild(s)}),this.drawUserGraphics(this.store.getState()))}else try{if(this.reduxHistory.length){this.evalCode();var O=[];this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,this.reduxHistory[0].state),O.push(this.store.getState()),this.reduxHistory.forEach(function(e,_){e.state;var s=e.action;_===l-1?t.updateGlobals({log:t.addLog}):t.updateGlobals({log:NOOP}),t.store.dispatch(s),O.push(t.store.getState())}),this.updateGlobals({log:this.addLog}),O=O.filter(function(e){return!lodash_isEmpty__WEBPACK_IMPORTED_MODULE_23___default()(e)});var D=_.isPaused?l:O.length-1,P=O[D];this.drawUserGraphics(P);var M=lodash_flatten__WEBPACK_IMPORTED_MODULE_18___default()(O.map(function(e){return e.actors})).filter(function(e){return e}),g=lodash_uniqBy__WEBPACK_IMPORTED_MODULE_22___default()(M,function(e){return e.id});O.forEach(function(e,_){if(_!==D&&_%ACTOR_FRAME_SKIP===0||_===O.length-1){var s=e.actors&&e.actors.filter(function(e){return c.includes(e.id)})||[];t.updateGlobals({log:NOOP}),window.drawActors&&window.drawActors({actors:s},!0),t.updateGlobals({log:t.addLog})}});var T=O[D];window.drawActors&&T&&T.actors&&window.drawActors({actors:T.actors.filter(function(e){return c.includes(e.id)})}),this.sendLogsToParent(),this.writePixelDataToCanvas(),this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,P),this.setState({alteredStates:O,actors:g,timelineIndex:D})}this.sendErrorToParent({type:"isPaused"})}catch(I){this.sendErrorToParent({type:"isPaused",error:I})}else if(this.isEmbed)a===_.game&&"SCRIPT-8-RESTART"!==window._script8.embedState||(this.evalCode(),window._script8.embedState={},window.init(window._script8.embedState));else if(_.isPaused||a!==_.game||m!==_.run||!deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(window.init?window.init.toString():null,this.previousInitString))if(this.evalCode(),deep_equal__WEBPACK_IMPORTED_MODULE_11___default()(window.init?window.init.toString():null,this.previousInitString)){var A=this.store&&this.store.getState()||{};this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,A,Object(redux__WEBPACK_IMPORTED_MODULE_14__.a)(this.reduxLogger))}else this.store=Object(redux__WEBPACK_IMPORTED_MODULE_14__.b)(this.reducer,{},Object(redux__WEBPACK_IMPORTED_MODULE_14__.a)(this.reduxLogger)),this.store.dispatch({type:"INIT"}),this.reduxHistory=[];this.sendErrorToParent({type:"componentDidMount"})}catch(I){this.sendErrorToParent({type:"componentDidMount",error:I})}if(this.timer||n||this.startTimer(),r){var v=document.body.querySelector(".container").scrollHeight;v===this.heightSent||this.isEmbed||(r.ports[0].postMessage({height:v}),this.heightSent=v)}}},{key:"render",value:function(){var e=this,_=this.state,t=_.isPaused,s=_.actors,r=_.alteredStates,n=_.timelineIndex,a=_.selectedActors,o=_.fps,i=_.run,l=_.started,u=_.isTouchScreen;return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:"Iframe"},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:"container"},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("canvas",{className:"master",width:CANVAS_SIZE,height:CANVAS_SIZE,ref:function(_){e._canvas=_}}),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("mobile-buttons",{show:i&&u})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowLeftRef,className:"button left",onTouchStart:this.touchstartArrowLeft,onTouchEnd:this.touchendArrowLeft},"<"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowUpRef,className:"button up",onTouchStart:this.touchstartArrowUp,onTouchEnd:this.touchendArrowUp},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,">")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowRightRef,className:"button right",onTouchStart:this.touchstartArrowRight,onTouchEnd:this.touchendArrowRight},">"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setaRef,className:"button a",onTouchStart:this.touchstarta,onTouchEnd:this.touchenda},"A"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setbRef,className:"button b",onTouchStart:this.touchstartb,onTouchEnd:this.touchendb},"B"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setArrowDownRef,className:"button down",onTouchStart:this.touchstartArrowDown,onTouchEnd:this.touchendArrowDown},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,"<")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setSpaceRef,className:"button select",onTouchStart:this.touchstartSpace,onTouchEnd:this.touchendSpace},"Select"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{ref:this.setEnterRef,className:"button start",onTouchStart:this.touchstartEnter,onTouchEnd:this.touchendEnter},"Start")),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("stats",{invisible:i&&!l})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:"button play",onClick:this.handlePauseClick},t?"play":"pause"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("button play",{hide:t}),onClick:this.handleRestartClick},"restart"),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("fps",{hide:t||!0})},"fps (avg): ",react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("span",null,o))),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()("timeline",{hide:i||0===r.length,invisible:!t})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("input",{type:"range",value:n,min:0,max:r.length-1,onChange:this.handleTimelineInput}),react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("ul",{ref:function(_){e._ul=_}},s.map(function(_,t){return react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("li",{key:_.id,className:classnames__WEBPACK_IMPORTED_MODULE_10___default()({hide:t>6})},react__WEBPACK_IMPORTED_MODULE_9___default.a.createElement("button",{className:classnames__WEBPACK_IMPORTED_MODULE_10___default()({active:a.includes(_.id)}),onClick:function(){return e.handleActorClick(_.id)}}))})))))}}]),Iframe}(react__WEBPACK_IMPORTED_MODULE_9__.Component);__webpack_exports__.a=Iframe},8:function(e,_,t){"use strict";var s={BOOT:"BOOT",HOME:"HOME",RUN:"RUN",HELP:"HELP",CODE:"CODE",SPRITE:"SPRITE",MAP:"MAP",SONG:"SONG",CHAIN:"CHAIN",PHRASE:"PHRASE",SHELF:"SHELF"},r=s,n={hideMenu:!1,iframeVersion:t(11).a,errorLine:null,screen:r.BOOT,booted:!1,gist:{},game:{0:{text:"init = state => {\n}\n\nupdate = (state, input, elapsed) => {\n}\n\ndraw = state => {\n}",active:!0,key:0}},token:{},nextAction:null,sprites:{},map:[],phrases:{},chains:{},songs:{},docHistories:{},dismissedNotices:[],selectedUi:{phrase:0,chain:0,song:0},tutorial:null,sound:!0,shelving:!1};_.a=n},91:function(e,_,t){"use strict";var s=t(11),r=t(30),n="\n\nconst modes = ['glitch', 'numbers', 'pre-ram', 'ram', 'run', 'end']\n\nconst size = range(128)\nconst d = 1\n\nconst rects = flatten(size.map(x => size.map(y => [x, y, d, 128])))\n\nconst biosLines = range(18).map(() => {\n  return (\n    '  ' +\n    range(4)\n      .map(() => random(1000, 9999))\n      .join('      ')\n  )\n})\n\nif (typeof(initialState) !== 'undefined') {\n  initialState = {\n    counter: 0,\n    totalElapsed: 0,\n    modeIndex: 0,\n    hasStarted: false\n  }\n}\n\ninit = state => {\n  state.counter = 0\n  state.totalElapsed = 0\n  state.modeIndex = 0\n  state.hasStarted = false\n}\n\nupdate = (state, input, elapsed) => {\n  if (!state.hasStarted) {\n    state.hasStarted = true\n  }\n\n  const mode = modes[state.modeIndex]\n\n  state.counter++\n  state.totalElapsed += elapsed\n\n  if (mode === 'glitch' && state.totalElapsed > 500) {\n    state.modeIndex++\n    state.totalElapsed = 0\n  } else if (mode === 'numbers' && state.totalElapsed > 100) {\n    state.modeIndex++\n    state.totalElapsed = 0\n  } else if (mode === 'pre-ram' && state.totalElapsed > 100) {\n    state.modeIndex++\n    state.totalElapsed = 0\n    state.counter = 0\n  } else if (mode === 'ram' && state.counter > 64 && _script8.end) {\n    // The _script8.end function is not defined until we're done fetching the gist.\n    state.modeIndex++\n    state.totalElapsed = 0\n    state.counter++\n  } else if (mode === 'run') {\n    if (input.__mousedown) {\n      ".concat(r.a,"\n      _script8.end()\n    }\n  }\n}\n\ndraw = state => {\n  const { modeIndex, counter } = state\n  const mode = modes[modeIndex]\n\n  if (mode === 'glitch') {\n    rects.forEach(rect => {\n      rectFill(...rect, rect[0] + (rect[1] * counter) / 100)\n    })\n  }\n\n  if (mode === 'numbers') {\n    const factor = 4\n    if (counter % factor === 0) {\n      rectFill(0, 0, 128, 128, 7)\n      biosLines.forEach((line, j) => {\n        print(0, 128 + 7 * j - (7 * counter) / factor, line, 5)\n      })\n    }\n  }\n\n  if (mode === 'pre-ram') {\n    rectFill(0, 0, 128, 128, 7)\n  }\n\n  if (mode === 'ram') {\n    rectFill(0, 0, 128, 128, 6)\n    print(7, 7 * 1, 'script-8', 0)\n    print(7, 7 * 3, 'bios (c) 1980 pantron inc.', 3)\n    print(7, 7 * 4, 'version ").concat(s.a,"', 3)\n    print(7, 7 * 6, 'RAM: ' + Math.min(state.counter, 32) + ' kb', 3)\n\n    print(\n      7,\n      7 * 9,\n      'booting cassette ' +\n        (Math.floor(state.counter / 20) % 2 === 0 ? '' : '+'),\n      3\n    )\n\n    rectFill(48 + 3 * 0, 7, 3, 5, 0)\n    rectFill(48 + 3 * 1, 7, 3, 5, 1)\n    rectFill(48 + 3 * 2, 7, 3, 5, 2)\n    rectFill(48 + 3 * 3, 7, 3, 5, 3)\n    rectFill(48 + 3 * 4, 7, 3, 5, 4)\n    rectFill(48 + 3 * 5, 7, 3, 5, 5)\n    rectFill(48 + 3 * 6, 7, 3, 5, 4)\n    rectFill(48 + 3 * 7, 7, 3, 5, 3)\n    rectFill(48 + 3 * 8, 7, 3, 5, 2)\n    rectFill(48 + 3 * 9, 7, 3, 5, 1)\n    rectFill(48 + 3 * 10, 7, 3, 5, 0)\n  }\n\n  if (mode === 'run') {\n    rectFill(0, 0, 128, 128, 6)\n    print(7, 7 * 1, 'script-8', 0)\n    print(7, 7 * 3, 'bios (c) 1980 pantron inc.', 3)\n    print(7, 7 * 4, 'version ").concat(s.a,"', 3)\n    print(7, 7 * 6, 'RAM: ' + Math.min(state.counter, 32) + ' kb', 3)\n\n    print(7, 7 * 9, 'booting cassette done. ', 3)\n\n    rectFill(48 + 3 * 0, 7, 3, 5, 0)\n    rectFill(48 + 3 * 1, 7, 3, 5, 1)\n    rectFill(48 + 3 * 2, 7, 3, 5, 2)\n    rectFill(48 + 3 * 3, 7, 3, 5, 3)\n    rectFill(48 + 3 * 4, 7, 3, 5, 4)\n    rectFill(48 + 3 * 5, 7, 3, 5, 5)\n    rectFill(48 + 3 * 6, 7, 3, 5, 4)\n    rectFill(48 + 3 * 7, 7, 3, 5, 3)\n    rectFill(48 + 3 * 8, 7, 3, 5, 2)\n    rectFill(48 + 3 * 9, 7, 3, 5, 1)\n    rectFill(48 + 3 * 10, 7, 3, 5, 0)\n    print(7, 7 * 11, '> click to run', 3)\n    rectFill(7, 7 * 12, 4, 5, Math.floor(state.counter / 25) % 2 ? 0 : 6)\n  }\n}\n\n");_.a=n},93:function(e,_,t){"use strict";_.a=function(e){var _=e.width,t=e.height,s=new ImageData(_,t),r=new ArrayBuffer(4*_*t),n=new Uint8ClampedArray(r);return{pixels:new Uint32Array(r),writePixelDataToCanvas:function(e){s.data.set(n),e.putImageData(s,0,0)}}}},94:function(e,_,t){"use strict";_.a=function(e){var _,t,s,r=e.ctx,n=e.width,a=e.height,o=r.getImageData(0,0,n,a),i=o.data.length,l={top:null,left:null,right:null,bottom:null};for(_=0;_<i;_+=4)0!==o.data[_+3]&&(t=_/4%n,s=~~(_/4/n),null===l.top&&(l.top=s),null===l.left?l.left=t:t<l.left&&(l.left=t),null===l.right?l.right=t:l.right<t&&(l.right=t),null===l.bottom?l.bottom=s:l.bottom<s&&(l.bottom=s));l.bottom+=1,l.right+=1;var u=document.createElement("canvas"),c=u.getContext("2d"),d=l.bottom-l.top,h=l.right-l.left,p=Math.max(h,d),E=r.getImageData(l.left,l.top,h,d);return c.canvas.width=p,c.canvas.height=p,c.putImageData(E,0,0),u}},95:function(e,_,t){"use strict";_.a=function(e){var _,t=e.token,s=e.blacklist,r=e.globals,n=e.shadows;return s.has(t)?_=!1:r.has(t)?_=!0:window.hasOwnProperty(t)?(n.add(t),_=!0):_=!0,_}},96:function(e,_,t){"use strict";_.a=function(e){return function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":var s;try{if(s=JSON.parse(JSON.stringify(_)),window.init(s),s.actors&&s.actors.filter(function(e){return!e.id}).length)throw new Error("Actors must have an id property.");e({type:"reducerError"})}catch(n){s=_,e({type:"reducerError",error:n})}finally{return s}case"UPDATE":var r;try{if(r=JSON.parse(JSON.stringify(_)),window.update(r,t.input,t.elapsed),r.actors&&r.actors.filter(function(e){return!e.id}).length)throw new Error("Actors must have an id property.");e({type:"reducerError"})}catch(n){r=_,e({type:"reducerError",error:n})}finally{return r}default:return _}}}},97:function(e,_,t){"use strict";t.d(_,"a",function(){return a});var s=t(0),r=t.n(s),n=t(8),a=function(e){return JSON.parse(r.a.get(e,'files["map.json"].content',JSON.stringify(n.a.map,null,2)))}},98:function(e,_,t){"use strict";t.d(_,"a",function(){return a});var s=t(0),r=t.n(s),n=t(8),a=function(e){return JSON.parse(r.a.get(e,'files["sprites.json"].content',JSON.stringify(n.a.sprites,null,2)))}},99:function(e,_,t){"use strict";t.d(_,"a",function(){return l});var s=t(0),r=t.n(s),n=t(100),a=t.n(n),o=t(8),i=t(15),l=function(e){return _=JSON.parse(r.a.get(e,'files["phrases.json"].content',JSON.stringify(o.a.phrases,null,2))),a()(r.a.mapValues(_,function(e){var _=Array.isArray(e),t=r()(_?e:e.notes).map(function(e){return e.match(/^(\d+)([a-g]#?)(-?\d)(\d)/).slice(1,5)}).map(function(e){return{index:e[0],note:Object(i.b)(e[1]),octave:+e[2],volume:+e[3]}}).keyBy("index").mapValues(function(e){return r.a.omit(e,"index")}).value();return r.a.isEmpty(t)?null:{notes:t,tempo:_?0:r.a.isNil(e.tempo)?0:e.tempo,synth:_?0:r.a.isNil(e.synth)?0:e.synth}}));var _}}},[[109,1,2]]]);
//# sourceMappingURL=main.d6fb5b2d.chunk.js.map